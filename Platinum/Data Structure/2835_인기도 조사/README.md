
# [Platinum IV] 인기도 조사 - 2835

[문제 링크](https://www.acmicpc.net/problem/2835)

### 문제 요약

<p> 00:00:00 ~ 23:59:59 기준 N개의 특정 구간 시청 정보가 주어질 때, Q개의 쿼리에 응답해 보자. </p>

### 제한

TL : 1sec, ML : 128 MB

N, Q ≤ 100,000

실수 오차 허용 범위는 10^-6

### 성능 요약

메모리: 6120 KB, 시간: 288 ms

### 분류

구현(implementation), 자료 구조(data structure), 세그먼트 트리(segment tree), 느리게 갱신되는 세그먼트 트리(lazy propagation)

### comment

nahwasa님의 추천을 받아 풀었었던 문제다.

<del> 사실 처음에 문제 내용보다 예제 입출력을 먼저 봤어가지고 거부감이 들었다. </del>

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

* 우선 양식 그대로 처리하기엔 굉장히 까다로워 보인다. 초단위로 파싱해보자. ( 0 ~ 86399던 1 ~ 86400던 편한대로)

* 이후 다시 문제를 보면 전체 범위 1 ~ 86400에 대해 특정 구간에 각 구간 길이만큼 값을 더해주고 특정 구간에 합쿼리를 날리는 것 즉, 전형적인 세그먼트 트리 문제 유형으로 보이게 된다.

하나 주의할 점이 있는데, 통상적인 업데이트 쿼리는 l ≤ r에 대해 수행된다. 하지만 이 문제의 본문을 읽어보면 다음과같은 문장이 있다.

"만약, 어떤 사람이 자정이 넘기 전(23:45:30) 에 텔레비전을 시작했다면, 다음날 텔레비전 시청을 종료한다. (01:15:00)"

즉, l > r인 예외를 따로 처리해주어야 한다는 것이다. 이에 대해 두가지 방법을 생각할 수 있다. (구간의 길이로 나누는 식은 생략)

{ 1 ~ l } + { r ~ 86400 } 또는 seg[1] - { l + 1 ~ r - 1 }

나는 후자의 방법을 택했으며 본인이 편한데로 구해주면 될 것 같다. 실수 오차 부분은 대충 소수점 이하 표현 범위를 넉넉잡아 출력해주면 되고..

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

+문추를 해주신 nahwasa님은 요 문제를 누적합으로 푸셨다고 한다.(기여탭을 보면 그의 독보적인 누적합 태그 기여가..)

더해지는 패턴이 항상 구간 길이만큼 일정함을 이용하면 될 듯 하긴한데 세그보다 누적합을 먼저 떠올리셨다는 것이 ㄷㄷ ([여기](https://nahwasa.com/entry/%EC%9E%90%EB%B0%94-%EB%B0%B1%EC%A4%80-2835-%EC%9D%B8%EA%B8%B0%EB%8F%84-%EC%A1%B0%EC%82%ACjava)에서 nahwasa님의 풀이를 둘러볼 수 있다.)
