
# [Platinum II] Megalopolis - 8145

[문제 링크](https://www.acmicpc.net/problem/8145)

### 문제 요약

<p> $N$개의 정점으로 이루어진 트리와 $N + Q - 1$개의 쿼리가 주어진다. 각 쿼리를 알맞게 처리해보자. </p>

### 제한

TL : 1sec, ML : 128 MB

$1 ≤ N ≤ 250,000$

$1 ≤ Q ≤ 250,000$

### 성능 요약

메모리: 37516 KB, 시간: 476 ms

### 분류

자료구조(data_structures), 트리(trees), heavy-light 분할(heavy-light decomposition), 세그먼트 트리(segtree)

### comment

간단한 형태의 쿼리 문제다.

문제를 편하게 다음과 같이 정의할 수 있을 것이다.

* 최초 모든 간선의 가중치는 $1$.
* 첫번째 쿼리 : 임의의 두 노드 $u, v$를 잇는 간선의 가중치를 $0$으로 만든다.
* 두번째 쿼리 : 루트 노드( $1$ )부터 $u$까지의 경로 상 가중치의 합.

첫번째 쿼리의 $u, v$는 반드시 부모 - 자식 관계에 놓여 있으므로 부모 관계를 따져 일반화 하는 것이 좋아 보인다.

결국 이는 hld + 합 세그로 쉽게 풀어낼 수 있다.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

사실 hld까지 갈 필요도 없이 주어진 쿼리의 수렴적 특성을 이용해 오프라인으로 처리 하거나 ett만을 이용해도 풀릴 듯 하다.

그래서 타 기본 hld 문제들에 비해 티어가 낮게 메겨진 듯.
